function cardLayout(e,t){e.data=[],e.layout={step:25,currentSize:25,expand:function(){this.currentSize<e.data.length&&(this.currentSize+=this.step)},isOver:function(){return this.currentSize<e.data.length}},t.$on("searchResponce",function(t,r){e.data=r,$(".collapsible").collapsible()})}function cardSearch(e,t,r){function a(){r.search(e.searchQuery)}return e.searchQuery={},e.$on("filter-change",function(t,r){angular.extend(e.searchQuery,r),a()}),{getCard:a}}function cardView(e,t){var r="ss-";return{currentEdition:0,setActiveEdition:function(e){this.currentEdition=e},isCurrent:function(e){return this.currentEdition===e},getEditionClass:function(e){return r+e.set_id.toLowerCase()},getRarityClass:function(e){return r+e.rarity.toLowerCase()},getFullCardType:function(e){var t=e.subtypes,r=e.supertypes,a=e.types,n=t?["â€”"]:[],c=[];return c=c.concat(r,a,n,t).join(" ")}}}function searchFilter(e,t){function r(){e.filter.oracle="",e.filter.format=null,e.filter.set=[],e.filter.type=[],e.filter.subtype=[],e.filter.supertype=[],e.filter.color=[],e.filter.multicolor=null,e.filter.rarity=[]}angular.element(document).ready(function(){function e(){a.animate({left:"0",right:"0"},r),c.animate({left:"100%",right:"0"},r),i.hide()}function t(){a.animate({left:"-100%",right:"100%"},r),c.animate({left:"0",right:"0"},r)}var r=200,a=$(".search-filters"),n=$(".search-filters__item"),c=$(".search-filters__options"),i=$(".search-filters__body"),l=$("#back-filter"),o=$(".modal-trigger");return l.click(e),o.leanModal({complete:e}),n.each(function(){var e=$(this),r=e.attr("href");e.click(function(e){e.stopPropagation(),e.preventDefault(),i.hide(),$(r).show(),t()})}),{openFilterMenu:e,openFilterOptions:t}});return e.filter={},r(),{toggleSelection:function(e,t){var r=e.indexOf(t);r>-1?e.splice(r,1):e.push(t)},applyFilter:function(t){e.$emit("filter-change",t)},filtersOptions:t.searchFiltersOptions,resetFilters:r}}function mtgParser(){var e=function(e,t,r){return e=e||"div",t=t||"",r=r||"","<"+e+' class="'+t+'">'+r+"</"+e+">"},t=function(e){var t=" ms-split",e=e.replace(/\{|\}/g,"").toLowerCase();return!e.match(/p/i)&&e.match(/\//)?"ms ms-"+e.replace("/","")+t:e.match(/t/i)?"ms ms-tap":"ms ms-"+e.replace("/","")};return function(r,a){if(r){var n={mana:{el:"span",classes:"",pattern:/\{[\w, \/]+\}/gi},p:{el:"p",classes:"card-text__p",pattern:/\n/g},reminder:{el:"span",classes:"card-text__reminder",pattern:/\(.+\)/gi}};return a=a||{},a=angular.merge(n,a),r=r.replace(a.p.pattern,"<br />"),r=r.replace(a.mana.pattern,function(r){var n=a.mana.el,c=a.mana.classes+" "+t(r);return e(n,c)}),r=r.replace(a.reminder.pattern,function(t){var r=a.reminder.el,n=a.reminder.classes;return e(r,n,t)})}}}function deckbrewAPI(e,t){var r={method:"GET",url:"https://api.deckbrew.com/mtg/cards",params:{name:""}},a="https://api.deckbrew.com/mtg/",n={colors:["black","blue","green","red","white"],rarity:["common","uncommon","rare","mythic"],formats:["vintage","legacy","modern","standard","commander"]};return e.get(a+"sets").then(function(e){return n.sets=e.data}),e.get(a+"types").then(function(e){return n.types=e.data}),e.get(a+"subtypes").then(function(e){return n.subtypes=e.data}),e.get(a+"supertypes").then(function(e){return n.supertypes=e.data}),{search:function(a){r.params=a,e(r).then(function(e){t.$emit("searchResponce",e.data)},function(e){console.log("Data senderror")})},searchFiltersOptions:n}}angular.module("cardLayout",["cardView"]),angular.module("cardSearch",["ngSanitize","searchFilter"]),angular.module("cardView",[]),angular.module("searchFilter",[]),angular.module("cardLayout").component("cardLayout",{templateUrl:"assets/html/card-layout/card-layout.template.html",controller:cardLayout}),cardLayout.$inject=["$scope","$rootScope"],angular.module("cardSearch").component("cardSearch",{templateUrl:"assets/html/card-search/card-search.template.html",controller:cardSearch}),cardSearch.$inject=["$scope","$rootScope","deckbrewAPI"],angular.module("cardView").directive("cardView",function(){return{templateUrl:"assets/html/card-view/card-view.template.html",scope:{card:"="},bindToController:!0,replace:!0,restrict:"E",controller:cardView,controllerAs:"$ctrl"}}),cardView.$inject=["$rootScope","$scope"],angular.module("searchFilter").component("searchFilter",{templateUrl:"assets/html/search-filter/search-filter.template.html",controller:searchFilter}),searchFilter.$inject=["$scope","deckbrewAPI"],angular.module("app",["cardSearch","cardLayout"]),angular.module("app").filter("mtgParse",mtgParser),angular.module("app").service("deckbrewAPI",deckbrewAPI),deckbrewAPI.$inject=["$http","$rootScope"],$(document).ready(function(){$("#main-preloader").hide()});